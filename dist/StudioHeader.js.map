{"version":3,"file":"StudioHeader.js","names":["React","useContext","PropTypes","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","getConfig","mergeConfig","subscribe","ActionRow","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","CaretIcon","messages","AUTHN_MINIMAL_HEADER","process","env","StudioDesktopHeaderBase","_React$Component","props","_classCallCheck","_callSuper","_inherits","_createClass","key","value","renderUserMenu","_this$props","userMenu","avatar","username","intl","createElement","transitionClassName","transitionTimeout","tag","formatMessage","className","size","src","alt","role","focusable","map","_ref","type","href","content","concat","renderLoggedOutItems","loggedOutItems","item","i","arr","length","render","_this$props2","logo","logoAltText","logoDestination","loggedIn","actionRowContent","logoProps","logoClasses","_extends","Component","propTypes","arrayOf","shape","oneOf","string","bool","element","isRequired","defaultProps","StudioDesktopHeader","StudioHeader","_ref2","_useContext","authenticatedUser","config","STUDIO_BASE_URL","LOGOUT_URL","LOGO_URL","SITE_NAME","Fragment"],"sources":["../src/StudioHeader.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  getConfig,\n  mergeConfig,\n  subscribe,\n} from '@edx/frontend-platform';\nimport { ActionRow } from '@edx/paragon';\n\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\nimport { CaretIcon } from './Icons';\n\nimport messages from './Header.messages';\n\nensureConfig([\n  'STUDIO_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n], 'StudioHeader component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'StudioHeader additional config');\n});\n\nclass StudioDesktopHeaderBase extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      actionRowContent,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <ActionRow>\n              {actionRowContent}\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n                className=\"nav secondary-menu-container align-items-center ml-auto\"\n              >\n                {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n              </nav>\n            </ActionRow>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nStudioDesktopHeaderBase.propTypes = {\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n  actionRowContent: PropTypes.element,\n\n  // i18n\n  intl: intlShape.isRequired,\n};\n\nStudioDesktopHeaderBase.defaultProps = {\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  actionRowContent: null,\n};\n\nconst StudioDesktopHeader = injectIntl(StudioDesktopHeaderBase);\n\nconst StudioHeader = ({ intl, actionRowContent }) => {\n  const { authenticatedUser, config } = useContext(AppContext);\n\n  const userMenu = authenticatedUser === null ? [] : [\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}`,\n      content: intl.formatMessage(messages['header.user.menu.studio.home']),\n    },\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}/maintenance`,\n      content: intl.formatMessage(messages['header.user.menu.studio.maintenance']),\n    },\n    {\n      type: 'item',\n      href: config.LOGOUT_URL,\n      content: intl.formatMessage(messages['header.user.menu.logout']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: config.STUDIO_BASE_URL,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    actionRowContent,\n    userMenu,\n    loggedOutItems: [],\n  };\n\n  return <StudioDesktopHeader {...props} />;\n};\n\nStudioHeader.propTypes = {\n  intl: intlShape.isRequired,\n  actionRowContent: PropTypes.element,\n};\n\nStudioHeader.defaultProps = {\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  actionRowContent: <></>,\n};\n\nexport default injectIntl(StudioHeader);\n"],"mappings":"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"}